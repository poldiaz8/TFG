<!DOCTYPE html>
<html>
<head>
  <title>Ejemplo 1</title>
  <script src="https://rawgit.com/aframevr/aframe/master/dist/aframe-master.js"></script>
  <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
  <script src="https://unpkg.com/aframe-thumb-controls-component@1.1.0/dist/aframe-thumb-controls-component.min.js"></script>
</head>
<script>
  
  AFRAME.registerComponent('animar', {
      schema: {
        take: {default: '*'}
      },
  
      init: function () {
        var data = this.data;
        var el = this.el;  
        
        el.addEventListener('triggerdown', function () {
          el.setAttribute('animation-mixer', {
            clip:  data.take,
            loop: 'once'
          });
          
        });
  
        el.addEventListener('animation-finished', function () {
          el.removeAttribute('animation-mixer');
        });
        
      }
    });

    AFRAME.registerComponent('thumb-movement-controls', {
  init: function () {
    this.buttons = {
      left: false, right: false, up: false, down: false
    };

    this.el.addEventListener('thumbleftstart', () => {
      this.buttons.left = true;
    });

    this.el.addEventListener('thumbleftend', () => {
      this.buttons.left = false;
    });
  },

  tick: function () {
    // Really simplified movement. Does not take into account camera heading or velocity / time, but wasd-controls shows how.
    if (this.buttons.left) {
      this.el.position.x -= 0.001;
    }
  }
});
    
  </script>
<body>
  <a-scene anti-alias>
    <a-assets>
        <a-asset-item id="escena" src="/modelos/ejemplos/ejemplo1/scene.gltf"></a-asset-item>
        <a-asset-item id="mando" src="/modelos/oculus-go-controller.gltf"></a-asset-item>
    </a-assets>

    <a-entity gltf-model="#mando"></a-entity>
    <a-entity id="mouseCursor" cursor="rayOrigin: mouse"></a-entity>
    <a-entity laser-controls="hand: right"></a-entity>
    <a-entity gltf-model="#escena" animar="take: Default Take"></a-entity>
    <a-entity oculus-go-controls="hand: right"></a-entity>
    <a-sky color="#ECECEC"></a-sky>
    <a-entity movement-controls="fly: true">
      <a-entity camera position="0 1.6 0"></a-entity>
    </a-entity>
  </a-scene>
</body>

</html>
